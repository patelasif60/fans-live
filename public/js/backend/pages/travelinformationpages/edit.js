!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=39)}({"/wMv":function(e,t){var i=0,n={init:function(){$(".edit-travel-information-form").validate({ignore:[],errorClass:"invalid-feedback animated fadeInDown",errorElement:"div",errorPlacement:function(e,t){"icon"==t.attr("name")?$(t).parents(".form-group .logo-input").append(e):$(t).parents(".form-group").append(e)},highlight:function(e){$(e).closest(".form-group").removeClass("is-invalid").addClass("is-invalid")},unhighlight:function(e){$(e).closest(".form-group").removeClass("is-invalid").removeClass("is-invalid")},success:function(e){$(e).closest(".form-group").removeClass("is-invalid"),$(e).remove()},rules:{title:{required:!0},publication_date:{required:!0},status:{required:!0},logo:{accept:"image/png",extension:"png",icondimension:[840,630,"logo"]},icon:{accept:"image/png",extension:"png",icondimension:[150,150,"icon"]}},messages:{icon:{accept:"Please upload the correct file format.",icondimension:"Please upload the correct file size."},logo:{accept:"Please upload the correct file format.",icondimension:"Please upload the correct file size."}}}),$(".js-datetimepicker").datetimepicker({ignoreReadonly:!0,format:Site.dateTimeCmsFormat,timeZone:Site.clubTimezone}),jQuery("#js-ckeditor:not(.js-ckeditor-enabled)").length&&(CKEDITOR.replace("js-ckeditor").on("change",function(e){e.editor.getData().replace(/<[^>]*>/gi,"").length>0?($("."+e.editor.id).removeClass("is-invalid"),$("."+e.editor.id).parent().find(".invalid-feedback").remove()):1==i&&$(".js-edit-travel-info-save-value").trigger("click")}),jQuery("#js-ckeditor").addClass("js-ckeditor-enabled"))}},a=Site.traveInfo,o=[],r='<div class="js-draggable-items block block-rounded draggable-item"><div class="block-header block-header-default"><h3 class="block-title">{title}</h3><div class="block-options"><button type="button" class="btn-block-option js-tooltip-enabled js-travel-edit-content" title="" data-toggle="modal" data-target="#js_edit_travel_info_section" data-original-title="Edit"" data-index="{index}"><i class="fal fa-pencil"></i></button><button type="button" class="btn-block-option js-tooltip-enabled js-travel-info-content-section-delete text-danger" data-toggle="modal" title="" data-index="{index}" data-original-title="Delete"><i class="fal fa-trash"></i></button><a class="btn-block-option draggable-handler" href="javascript:void(0)"><i class="si si-cursor-move"></i></a></div></div></div>';jQuery(function(){n.init()});var l=$("#section_content_form");l.validate({ignore:[],errorClass:"invalid-feedback animated fadeInDown",errorElement:"div",errorPlacement:function(e,t){"content_description"==t.attr("name")?($(t).parent().find(".cke_editor_js-ckeditor").addClass("is-invalid"),$(t).parents(".form-group").append(e)):$(t).parents(".form-group").append(e)},highlight:function(e){$(e).closest(".form-group").removeClass("is-invalid").addClass("is-invalid")},unhighlight:function(e){$(e).closest(".form-group").removeClass("is-invalid").removeClass("is-invalid")},success:function(e){$(e).closest(".form-group").removeClass("is-invalid"),$(e).remove()},rules:{content_title:{required:!0},content_description:{required:function(e){CKEDITOR.instances[e.id].updateElement();var t=e.value.replace(/<[^>]*>/gi,"");return t.length>0&&$("#"+e.id).parent().find(".cke_editor_js-ckeditor").removeClass("is-invalid"),0===t.length}}}}),$(document).on("click",".js-edit-travel-info-save-value",function(){if(i=1,!l.valid())return!1;var e=$(".js-travel-info-content-section-title").val(),t=$("#js_add_edit_travel_info").val(),n=CKEDITOR.instances["js-ckeditor"].getData();if("add"==t){jQuery(".js-draggable-items:not(.js-draggable-items-enabled)").each(function(){var e=jQuery(this);e.addClass("js-draggable-items-enabled"),e.children(".draggable-column").sortable({connectWith:".draggable-column",items:".draggable-item",dropOnEmpty:!0,opacity:.75,handle:".draggable-handler",placeholder:"draggable-placeholder",tolerance:"pointer",start:function(e,t){t.placeholder.css({height:t.item.outerHeight(),"margin-bottom":t.item.css("margin-bottom")})}})}),$("#edit_travel_info_content").show(),a.push({id:"0",title:e,description:n}),$("#edit_travel_info_content_section").val(JSON.stringify(a));var o=r.replace("{title}",e).replace('data-index="{index}"',"data-index='"+(a.length-1)+"'");$("#edit_travel_info_content").append(o)}else{var d=$("#js-add_edit_travel_index").val();a[d].description=n,a[d].title=e,a[d].description=n;o=r.replace("{title}",e).replace("{index}",a.length+1);$("#edit_travel_info_content .block-title:eq("+d+")").html(e)}$(".js-travel-info-content-section-title").val(""),$("#js_edit_travel_info_section").modal("hide")}),$(document).on("click",".js-travel-edit-content",function(){var e;e=$(this).attr("data-index"),$(".js-modal-title").html("Edit contents section"),i=1,$("#js_add_edit_travel_info").val("edit"),$("#js-add_edit_travel_index").val(e),$("#add-edit-id").val(a[e].id),$(".js-travel-info-content-section-title").val(a[e].title),CKEDITOR.instances["js-ckeditor"].setData(a[e].description)}),$(document).on("click",".js-travel-info-content-section",function(){$(".js-modal-title").html("Add contents section"),i=0,$("#js_add_edit_travel_info").val("add"),$(".js-travel-info-content-section-title").val(""),$("#js-add_edit_travel_index").val(""),CKEDITOR.instances["js-ckeditor"].setData("")}),a.length||$("#edit_travel_info_content").hide(),$(document).on("click",".js-travel-info-content-section-delete",function(){var e;e=$(this).attr("data-index"),a.splice(e,1),$(this).closest(".draggable-item").remove(),a.length||$("#edit_travel_info_content").hide();var t=0;$("#edit_travel_info_content .draggable-item").each(function(e){$(this).find(".js-travel-edit-content, .js-travel-info-content-section-delete").attr("data-index",t),t++})}),$(".js-draggable-items").sortable({start:function(e,t){o=[]},stop:function(e,t){o=[],$("#edit_travel_info_content .draggable-item").each(function(e){e=$(this).find(".js-travel-edit-content").attr("data-index");var t=a[e];o.push(t)}),a=o;var i=0;$("#edit_travel_info_content .draggable-item").each(function(e){$(this).find(".js-travel-edit-content, .js-travel-info-content-section-delete").attr("data-index",i),i++})}}),$(document).on("click",".js-save-travel-info-content-section",function(){if($(".edit-travel-information-form").valid(),!(0==$("#edit_travel_info_content").text().trim().length?($("#mcq_draggable_content_validation_error").addClass("mb-15"),$("#mcq_draggable_content_validation_error").text(""),$("#mcq_draggable_content_validation_error").text("Please add at least one content section"),!1):($("#mcq_draggable_content_validation_error").removeClass("mb-15"),$("#mcq_draggable_content_validation_error").text(""),!0)))return!1;$("#edit_travel_info_content_section").val(JSON.stringify(a)),$(".js-edit-travel-info-content").submit()}),$(".uploadimage").change(function(){var e=$(this).val().split(".").pop().toLowerCase();-1!=$.inArray(e,["png","jpg","jpeg"])&&function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(t){$(".js-manage-icon-width").removeClass("col-12").addClass("col-9"),$("#"+e.id+"_preview").attr("src",t.target.result),$("#"+e.id+"_preview_container").removeClass("d-md-none")},t.readAsDataURL(e.files[0])}}(this)}),$("#logo").change(function(){var e=$(this).val().split(".").pop().toLowerCase();-1!=$.inArray(e,["png","jpg","jpeg"])&&function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$(".js-manage-logo-width").removeClass("col-12").addClass("col-9"),$("#logo_preview_container").hasClass("d-md-none")&&$("#logo_preview_container").removeClass("d-md-none"),$("#remove").removeClass("d-md-none"),$("#logo_preview_container").html('<div class="logo_preview_container ml-3"><img id="logo_preview" alt="Category logo" src="'+e.target.result+'" /><a href="#" id="remove" name="remove" class="close-preview" data-toggle="tooltip" title="Delete"><i class="far fa-trash-alt text-muted"></i> </a></div>')},t.readAsDataURL(e.files[0])}}(this)}),$(document).on("click","#remove",function(){event.preventDefault(),$("#logo").val(""),$("#logo_edit").val(""),document.getElementById("lbl_logo").innerText="Choose File",$("#logo_preview_container").addClass("d-md-none"),$("#remove").addClass("d-md-none"),$(".js-manage-logo-width").removeClass("col-9").addClass("col-12")})},39:function(e,t,i){e.exports=i("/wMv")}});